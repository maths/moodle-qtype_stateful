define ("qtype_stateful/ajaxvalidation",["jquery","core/ajax","core/event"],function(a,b,c){"use strict";var d={typingDelay:1e3,timeoutHandles:{},activeFields:{},listeners:[]};return{register:function register(e,f){if(!(f in d.activeFields)){d.activeFields[f]={}}for(var g=0;g<e.length;g++){d.activeFields[f][e[g]]=!0}if(!(f in d.timeoutHandles)){d.timeoutHandles[f]=null}for(var h=a("#"+a.escapeSelector(f)+"__tech_details"),j=h.data("qaid"),k=h.data("seqn"),l=function(){var e={};Object.keys(d.activeFields[f]).forEach(function(b){var c=a("#"+a.escapeSelector(f+b));if(1===c.length){if("checkbox"===c.first().prop("type")){if(c.first().prop("checked")){e[b]="true"}}else{e[b]=c.val()}}else{c=a("input[name="+a.escapeSelector(f+b)+"]:checked");if(1===c.length){e[b]=c.first().val()}}});e=JSON.stringify(e);b.call([{methodname:"qtype_stateful_validate_input",args:{qaid:j,seqn:k,data:e},done:function done(b){var e=JSON.parse(b.val_update),g=JSON.parse(b.vbox_update);Object.keys(e).forEach(function(b){var c=a("#"+a.escapeSelector(f+b));c.val(e[b]);c.trigger("change");c.trigger("input")});Object.keys(g).forEach(function(b){var d=a("#"+a.escapeSelector(f+"vbox_"+b));d.html(g[b]);if(""===g[b]){d.hide()}else{d.show()}c.notifyFilterContentUpdated(d)});for(var h=0;h<d.listeners.length;h++){d.listeners[h]()}}}])},g=0,m;g<e.length;g++){m=a("#"+a.escapeSelector(f+e[g]));m.on("input",function(){for(var a=0;a<d.listeners.length;a++){d.listeners[a]()}if(null!==d.timeoutHandles[f]){clearTimeout(d.timeoutHandles[f]);d.timeoutHandles[f]=null}d.timeoutHandles[f]=setTimeout(l,d.typingDelay)});a("input[type=radio][name=\""+a.escapeSelector(f+e[g])+"\"]").on("click",function(){for(var a=0;a<d.listeners.length;a++){d.listeners[a]()}if(null!==d.timeoutHandles[f]){clearTimeout(d.timeoutHandles[f]);d.timeoutHandles[f]=null}d.timeoutHandles[f]=setTimeout(l,d.typingDelay)});a("select[name=\""+a.escapeSelector(f+e[g])+"\"]").on("change",function(){for(var a=0;a<d.listeners.length;a++){d.listeners[a]()}if(null!==d.timeoutHandles[f]){clearTimeout(d.timeoutHandles[f]);d.timeoutHandles[f]=null}d.timeoutHandles[f]=setTimeout(l,d.typingDelay)})}},registerListener:function registerListener(a){d.listeners[d.listeners.length]=a},executeListeners:function executeListeners(){for(var a=0;a<d.listeners.length;a++){d.listeners[a]()}}}});
//# sourceMappingURL=ajaxvalidation.min.js.map
